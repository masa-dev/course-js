# course-js

- [概要](#概要)
- [操作方法](#操作方法)
- [プログラムの説明](#プログラムの説明)
- [公開しているサイト](#公開しているサイト)

## 概要

点（車）に既定のコースを壁に当たらないように走らせる

## 操作方法

#### パソコン

- 右回転

    「a」または「→」

- 左回転

    「d」または「←」

- 画面の更新

    「Enter」または「Space」

#### スマートフォン

各種ボタンで「右回転」、「左回転」、「画面の更新」ができる

## プログラムの説明

このプログラムを作るにあたっては、大部分を簡単なオブジェクト指向を取り入れて作っています。

- 点

    点（車）は、js/car.js で定義しています。

    基本的なベクトル計算は、進行方向のベクトルをXベクトルとYベクトルに分け、三角関数を用いて各ベクトルの回転の計算をしています。

- コース

    コースは、js/course.js で定義しています。

    コースの表示は、HTMLの canvas 要素を用いています。<br>
    一つの canvas で色を変えて表示させようとすると色が変わらなかったりコースがぐちゃぐちゃになったりしたので、複数の canvas 要素を重ねて表示させています。

    衝突の判定は、線分のバウンディングボックスを作成し、そのバウンディングボックスに点（車）が入ったときに線分と点の距離を調べます。もし、一定距離内に点（車）が入っていたら止めるようにしています。<br>
    衝突に関して、canvas がおおよそ 60fps で動いており、余裕を持たないで実行するとすり抜けが起きるため、バウンディングボックスや線分との距離にはある程度の余分を持たせています。

- canvas

    canvas は、window.requestAnimationFrame という関数を再帰的に呼び出して動かしています。


## 公開しているサイト

https://masa-dev.github.io/course-js/